program _new_lab2;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

type
  TObjects = (House1FL, House2FL, House3FL, TradingHouse, Bridge, AutoRoad, Railway);
  TObjInfo = record
    obType:TObjects;
    Workers:integer;
    MatCost:Currency;
  end;
  TObjAdr = ^TObjList;
  TObjList = record
    Info: TObjInfo;
    Adr: TObjAdr;
  end;
  const
    ObjFile = 'objects.dat';
var
  ObjHead:TObjAdr;
  //TObjects



procedure readFile;
var
  TempObjInfo:TObjInfo;
  f: file of TObjInfo;
  OTemp: TObjAdr;
begin
  AssignFile(f, ObjFile);
  if fileExists(ObjFile) then
  begin
    Reset(f);
    Writeln('Read file');
    OTemp := ObjHead;
    while not EOF(f) do
    begin
      new(OTemp^.adr);
      OTemp:=OTemp^.adr;
      OTemp^.adr:=nil;
      read(f, TempObjInfo);
      //OTemp^.Info

    end;
    close(f);
  end
  else
  begin
    Rewrite(f);
    Writeln('Create File');
    close(f);
  end;

end;

procedure insertObjList(var head: TObjAdr; tp:TObjects = House1FL; wk:integer = 0; mc:Currency = 0);
var
  temp:TObjAdr;
begin
  temp := head;
  while temp^.adr <> nil do
  begin
    temp := temp^.adr;
  end;
  new(temp^.adr);
  temp:=temp^.adr;
  temp^.adr:=nil;
  temp^.Info.obType := tp;
  temp^.Info.Workers := wk;
  temp^.Info.MatCost := mc;
end;

begin
  new(ObjHead);
  ObjHead^.adr := nil;
  insertObjList(ObjHead);
  readFile;
  readln;
end.
